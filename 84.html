<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JustHodl.AI | Ultimate Macro Financial Command Center</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #00ff41;
            --danger: #ff0040;
            --warning: #ffaa00;
            --info: #00aaff;
            --bg-primary: #0a0e27;
            --bg-secondary: #111827;
            --bg-tertiary: #1a1f3a;
            --border: #2d3561;
            --text-primary: #e0e7ff;
            --text-secondary: #94a3b8;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #000;
            color: var(--text-primary);
            overflow-x: hidden;
        }

        /* Header */
        .header {
            background: linear-gradient(180deg, rgba(26, 31, 58, 0.95) 0%, rgba(17, 24, 39, 0.95) 100%);
            backdrop-filter: blur(20px);
            border-bottom: 2px solid var(--danger);
            padding: 10px 20px;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-text {
            font-size: 20px;
            font-weight: 800;
            color: var(--danger);
        }

        .crisis-indicator {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .crisis-meter {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 15px;
            background: rgba(255, 0, 64, 0.1);
            border: 1px solid var(--danger);
            border-radius: 20px;
        }

        .crisis-value {
            font-size: 18px;
            font-weight: bold;
            color: var(--danger);
        }

        .khalid-index {
            padding: 10px 20px;
            background: linear-gradient(90deg, var(--danger), var(--warning));
            border-radius: 8px;
            text-align: center;
        }

        .khalid-value {
            font-size: 24px;
            font-weight: bold;
            color: #000;
        }

        .khalid-label {
            font-size: 12px;
            color: #000;
            font-weight: 600;
        }

        /* Navigation */
        .nav-tabs {
            display: flex;
            gap: 2px;
            padding: 10px 20px;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border);
            overflow-x: auto;
            flex-wrap: wrap;
        }

        .nav-tab {
            padding: 8px 16px;
            background: transparent;
            border: 1px solid transparent;
            border-radius: 6px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s;
            font-size: 12px;
            white-space: nowrap;
        }

        .nav-tab:hover {
            background: rgba(255, 0, 64, 0.1);
            border-color: var(--danger);
        }

        .nav-tab.active {
            background: var(--danger);
            color: #fff;
            font-weight: 600;
        }

        /* Main Container */
        .main-container {
            padding: 20px;
            max-width: 1920px;
            margin: 0 auto;
        }

        /* Tab Content */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Grid Layouts */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }

        .data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        /* Metric Card */
        .metric-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .metric-card.critical {
            border-color: var(--danger);
            background: rgba(255, 0, 64, 0.05);
        }

        .metric-label {
            font-size: 10px;
            color: var(--text-secondary);
            text-transform: uppercase;
            margin-bottom: 5px;
        }

        .metric-value {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary);
        }

        .metric-change {
            font-size: 11px;
            margin-top: 5px;
        }

        .change-positive {
            color: var(--primary);
        }

        .change-negative {
            color: var(--danger);
        }

        /* Data Card */
        .data-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
        }

        .data-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border);
        }

        .data-card-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-badge {
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .badge-live {
            background: rgba(0, 255, 65, 0.2);
            color: var(--primary);
            border: 1px solid var(--primary);
        }

        .badge-critical {
            background: rgba(255, 0, 64, 0.2);
            color: var(--danger);
            border: 1px solid var(--danger);
        }

        .badge-warning {
            background: rgba(255, 170, 0, 0.2);
            color: var(--warning);
            border: 1px solid var(--warning);
        }

        /* Data Table */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
        }

        .data-table th {
            background: rgba(0, 0, 0, 0.5);
            padding: 8px;
            text-align: left;
            font-weight: 600;
            border-bottom: 1px solid var(--border);
            color: var(--primary);
        }

        .data-table td {
            padding: 6px 8px;
            border-bottom: 1px solid rgba(45, 53, 97, 0.3);
        }

        .data-table tr:hover {
            background: rgba(0, 255, 65, 0.02);
        }

        /* Risk Levels */
        .risk-low { color: var(--primary); }
        .risk-medium { color: var(--warning); }
        .risk-high { color: var(--danger); }
        .risk-extreme { color: #ff00ff; font-weight: bold; }

        /* Section Headers */
        .section-header {
            background: linear-gradient(90deg, rgba(255, 0, 64, 0.1), transparent);
            border-left: 4px solid var(--danger);
            padding: 10px 15px;
            margin-bottom: 15px;
            font-size: 16px;
            font-weight: 700;
            color: var(--danger);
        }

        /* Terminal */
        .terminal {
            background: #000;
            border: 1px solid var(--primary);
            border-radius: 6px;
            padding: 10px;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            max-height: 300px;
            overflow-y: auto;
            margin-bottom: 20px;
        }

        /* Control Panel */
        .control-panel {
            display: flex;
            gap: 10px;
            padding: 10px 20px;
            background: rgba(17, 24, 39, 0.95);
            border-bottom: 1px solid var(--border);
            flex-wrap: wrap;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 12px;
        }

        .btn-danger {
            background: var(--danger);
            color: #fff;
        }

        .btn-danger:hover {
            background: #ff1a4a;
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 20px;
            color: var(--text-secondary);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .data-grid {
                grid-template-columns: 1fr;
            }
            
            .metrics-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-top">
            <div class="logo">
                <div class="logo-text">🔴 ULTIMATE MACRO FINANCIAL COMMAND CENTER</div>
            </div>
            <div class="crisis-indicator">
                <div class="crisis-meter">
                    <span>CRISIS DISTANCE:</span>
                    <span class="crisis-value" id="crisisDistance">45%</span>
                </div>
                <div class="khalid-index">
                    <div class="khalid-value" id="khalidIndex">45/100</div>
                    <div class="khalid-label">KHALID INDEX: HOLD</div>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav-tabs">
        <button class="nav-tab active" onclick="switchTab('executive')">Executive Dashboard</button>
        <button class="nav-tab" onclick="switchTab('liquidity')">Global Liquidity</button>
        <button class="nav-tab" onclick="switchTab('treasury')">Treasury & Fed</button>
        <button class="nav-tab" onclick="switchTab('icebofa')">ICE BofA Indices</button>
        <button class="nav-tab" onclick="switchTab('securities')">US Securities</button>
        <button class="nav-tab" onclick="switchTab('darkpool')">Dark Pool & Options</button>
        <button class="nav-tab" onclick="switchTab('central')">Central Banks</button>
        <button class="nav-tab" onclick="switchTab('risk')">Risk Metrics</button>
        <button class="nav-tab" onclick="switchTab('labor')">Labor & Sahm</button>
        <button class="nav-tab" onclick="switchTab('pmi')">Global PMI</button>
        <button class="nav-tab" onclick="switchTab('internals')">Market Internals</button>
        <button class="nav-tab" onclick="switchTab('positioning')">Positioning</button>
        <button class="nav-tab" onclick="switchTab('technical')">Technical Levels</button>
        <button class="nav-tab" onclick="switchTab('intermarket')">Intermarket</button>
        <button class="nav-tab" onclick="switchTab('raw')">Raw Data</button>
    </nav>

    <!-- Control Panel -->
    <div class="control-panel">
        <button class="btn btn-danger" onclick="fetchAllData()">
            <i class="fas fa-sync"></i> FETCH ALL DATA
        </button>
        <button class="btn btn-danger" onclick="toggleAutoRefresh()">
            <i class="fas fa-clock"></i> <span id="autoRefreshBtn">AUTO-REFRESH OFF</span>
        </button>
        <span style="margin-left: auto; color: var(--text-secondary); font-size: 11px;">
            Last Update: <span id="lastUpdate">Never</span> | 
            Response: <span id="responseTime">0ms</span> | 
            Data Points: <span id="dataPoints">0</span>
        </span>
    </div>

    <!-- Main Container -->
    <div class="main-container">

        <!-- Executive Dashboard -->
        <div id="executive" class="tab-content active">
            <div class="section-header">⚠️ EXECUTIVE CRISIS DASHBOARD</div>
            
            <div class="metrics-grid" id="executiveMetrics">
                <!-- Will be populated with key metrics -->
            </div>

            <div class="data-grid">
                <div class="data-card">
                    <div class="data-card-header">
                        <div class="data-card-title">
                            <i class="fas fa-exclamation-triangle"></i> Critical Indicators
                        </div>
                        <span class="status-badge badge-critical">LIVE</span>
                    </div>
                    <table class="data-table" id="criticalIndicators">
                        <thead>
                            <tr>
                                <th>Indicator</th>
                                <th>Current</th>
                                <th>Crisis Level</th>
                                <th>Distance</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>

                <div class="data-card">
                    <div class="data-card-header">
                        <div class="data-card-title">
                            <i class="fas fa-chart-line"></i> Key Series Update
                        </div>
                        <span class="status-badge badge-live">REAL-TIME</span>
                    </div>
                    <table class="data-table" id="keySeries">
                        <thead>
                            <tr>
                                <th>Series</th>
                                <th>Value</th>
                                <th>Trend</th>
                                <th>Impact</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Global Liquidity Tab -->
        <div id="liquidity" class="tab-content">
            <div class="section-header">💧 GLOBAL LIQUIDITY PLUMBING - 272 METRICS</div>
            
            <div class="metrics-grid" id="liquidityMetrics">
                <!-- Liquidity metrics -->
            </div>

            <div class="data-grid">
                <div class="data-card">
                    <div class="data-card-header">
                        <div class="data-card-title">Central Bank Liquidity</div>
                        <span class="status-badge badge-critical">DRAINING</span>
                    </div>
                    <table class="data-table" id="cbLiquidity">
                        <thead>
                            <tr>
                                <th>Central Bank</th>
                                <th>Balance Sheet</th>
                                <th>Weekly Δ</th>
                                <th>Monthly Δ</th>
                                <th>YoY Δ</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>

                <div class="data-card">
                    <div class="data-card-header">
                        <div class="data-card-title">Repo Market Stress</div>
                        <span class="status-badge badge-warning">STRESSED</span>
                    </div>
                    <table class="data-table" id="repoMarket">
                        <thead>
                            <tr>
                                <th>Metric</th>
                                <th>Current</th>
                                <th>Normal</th>
                                <th>Crisis</th>
                                <th>Multiple</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Treasury & Fed Tab -->
        <div id="treasury" class="tab-content">
            <div class="section-header">🏛️ TREASURY & FEDERAL RESERVE</div>
            
            <div class="metrics-grid" id="treasuryMetrics">
                <!-- Treasury metrics -->
            </div>

            <div class="data-grid">
                <div class="data-card">
                    <div class="data-card-header">
                        <div class="data-card-title">Treasury Auctions</div>
                        <span class="status-badge badge-warning">WEAK</span>
                    </div>
                    <table class="data-table" id="treasuryAuctions">
                        <thead>
                            <tr>
                                <th>Auction</th>
                                <th>Grade</th>
                                <th>Bid-Cover</th>
                                <th>Indirect %</th>
                                <th>Tail (bp)</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>

                <div class="data-card">
                    <div class="data-card-header">
                        <div class="data-card-title">Fed Operations</div>
                        <span class="status-badge badge-live">LIVE</span>
                    </div>
                    <table class="data-table" id="fedOperations">
                        <thead>
                            <tr>
                                <th>Operation</th>
                                <th>Value</th>
                                <th>Change</th>
                                <th>Impact</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- ICE BofA Indices Tab -->
        <div id="icebofa" class="tab-content">
            <div class="section-header">📊 ICE BOFA INDICES - ALL 165 SERIES</div>
            
            <div class="data-grid">
                <div class="data-card">
                    <div class="data-card-header">
                        <div class="data-card-title">Investment Grade</div>
                        <span class="status-badge badge-live">LIVE</span>
                    </div>
                    <table class="data-table" id="igIndices">
                        <thead>
                            <tr>
                                <th>Index</th>
                                <th>Spread (bp)</th>
                                <th>1W Δ</th>
                                <th>1M Δ</th>
                                <th>Signal</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>

                <div class="data-card">
                    <div class="data-card-header">
                        <div class="data-card-title">High Yield</div>
                        <span class="status-badge badge-warning">WIDENING</span>
                    </div>
                    <table class="data-table" id="hyIndices">
                        <thead>
                            <tr>
                                <th>Index</th>
                                <th>Spread (bp)</th>
                                <th>1W Δ</th>
                                <th>1M Δ</th>
                                <th>Signal</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- US Securities Tab -->
        <div id="securities" class="tab-content">
            <div class="section-header">📈 US SECURITIES INDICES</div>
            
            <div class="metrics-grid" id="securitiesMetrics">
                <!-- Securities metrics -->
            </div>

            <div class="data-grid">
                <div class="data-card">
                    <div class="data-card-header">
                        <div class="data-card-title">Major Indices</div>
                        <span class="status-badge badge-live">LIVE</span>
                    </div>
                    <table class="data-table" id="majorIndices">
                        <thead>
                            <tr>
                                <th>Index</th>
                                <th>Value</th>
                                <th>Day Δ</th>
                                <th>Week Δ</th>
                                <th>Month Δ</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>

                <div class="data-card">
                    <div class="data-card-header">
                        <div class="data-card-title">Sector Performance</div>
                        <span class="status-badge badge-live">LIVE</span>
                    </div>
                    <table class="data-table" id="sectorPerformance">
                        <thead>
                            <tr>
                                <th>Sector</th>
                                <th>Performance</th>
                                <th>Breadth</th>
                                <th>Signal</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Dark Pool & Options Tab -->
        <div id="darkpool" class="tab-content">
            <div class="section-header">🌑 DARK POOL & OPTIONS FLOW</div>
            
            <div class="data-grid">
                <div class="data-card">
                    <div class="data-card-header">
                        <div class="data-card-title">Dark Pool Activity</div>
                        <span class="status-badge badge-critical">INSTITUTIONAL</span>
                    </div>
                    <table class="data-table" id="darkPoolActivity">
                        <thead>
                            <tr>
                                <th>Symbol</th>
                                <th>Dark Pool $</th>
                                <th>vs VWAP</th>
                                <th>vs 20D Avg</th>
                                <th>Signal</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>

                <div class="data-card">
                    <div class="data-card-header">
                        <div class="data-card-title">Options Flow</div>
                        <span class="status-badge badge-warning">HEDGING</span>
                    </div>
                    <table class="data-table" id="optionsFlow">
                        <thead>
                            <tr>
                                <th>Metric</th>
                                <th>Current</th>
                                <th>Percentile</th>
                                <th>Signal</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Central Banks Tab -->
        <div id="central" class="tab-content">
            <div class="section-header">🏦 CENTRAL BANK OPERATIONS</div>
            
            <div class="data-grid">
                <div class="data-card">
                    <div class="data-card-header">
                        <div class="data-card-title">G4 Central Banks</div>
                        <span class="status-badge badge-critical">QT ACTIVE</span>
                    </div>
                    <table class="data-table" id="g4CentralBanks">
                        <thead>
                            <tr>
                                <th>Bank</th>
                                <th>Balance Sheet</th>
                                <th>Monthly Δ</th>
                                <th>Policy</th>
                                <th>Impact</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Risk Metrics Tab -->
        <div id="risk" class="tab-content">
            <div class="section-header">⚠️ RISK METRICS & AI PREDICTIONS</div>
            
            <div class="metrics-grid" id="riskMetrics">
                <!-- Risk metrics -->
            </div>

            <div class="data-grid">
                <div class="data-card">
                    <div class="data-card-header">
                        <div class="data-card-title">System Risk Indicators</div>
                        <span class="status-badge badge-warning">ELEVATED</span>
                    </div>
                    <table class="data-table" id="riskIndicators">
                        <thead>
                            <tr>
                                <th>Indicator</th>
                                <th>Value</th>
                                <th>Threshold</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Labor & Sahm Tab -->
        <div id="labor" class="tab-content">
            <div class="section-header">👷 LABOR MARKET & SAHM RULE</div>
            
            <div class="metrics-grid">
                <div class="metric-card critical">
                    <div class="metric-label">SAHM RULE</div>
                    <div class="metric-value" id="sahmRule">0.33</div>
                    <div class="metric-change">Trigger: 0.50 | Distance: 0.17pp</div>
                </div>
            </div>

            <div class="data-grid">
                <div class="data-card">
                    <div class="data-card-header">
                        <div class="data-card-title">Labor Market Metrics</div>
                        <span class="status-badge badge-warning">WEAKENING</span>
                    </div>
                    <table class="data-table" id="laborMetrics">
                        <thead>
                            <tr>
                                <th>Metric</th>
                                <th>Current</th>
                                <th>3M Ago</th>
                                <th>YoY</th>
                                <th>Recession Level</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Global PMI Tab -->
        <div id="pmi" class="tab-content">
            <div class="section-header">🌍 GLOBAL MANUFACTURING PMI</div>
            
            <div class="data-grid">
                <div class="data-card">
                    <div class="data-card-header">
                        <div class="data-card-title">PMI by Country</div>
                        <span class="status-badge badge-critical">CONTRACTION</span>
                    </div>
                    <table class="data-table" id="pmiData">
                        <thead>
                            <tr>
                                <th>Country</th>
                                <th>PMI</th>
                                <th>New Orders</th>
                                <th>3M Δ</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Market Internals Tab -->
        <div id="internals" class="tab-content">
            <div class="section-header">📊 MARKET INTERNALS</div>
            
            <div class="data-grid">
                <div class="data-card">
                    <div class="data-card-header">
                        <div class="data-card-title">Breadth & Structure</div>
                        <span class="status-badge badge-warning">DETERIORATING</span>
                    </div>
                    <table class="data-table" id="marketInternals">
                        <thead>
                            <tr>
                                <th>Metric</th>
                                <th>SPX</th>
                                <th>NDX</th>
                                <th>RUT</th>
                                <th>Signal</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>

                <div class="data-card">
                    <div class="data-card-header">
                        <div class="data-card-title">Dealer Positioning</div>
                        <span class="status-badge badge-critical">SHORT GAMMA</span>
                    </div>
                    <table class="data-table" id="dealerPositioning">
                        <thead>
                            <tr>
                                <th>Metric</th>
                                <th>Current</th>
                                <th>Crisis Level</th>
                                <th>Distance</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Positioning Tab -->
        <div id="positioning" class="tab-content">
            <div class="section-header">📍 SENTIMENT & POSITIONING</div>
            
            <div class="data-grid">
                <div class="data-card">
                    <div class="data-card-header">
                        <div class="data-card-title">Institutional Positioning</div>
                        <span class="status-badge badge-warning">EXTREME</span>
                    </div>
                    <table class="data-table" id="positioning Table">
                        <thead>
                            <tr>
                                <th>Asset Class</th>
                                <th>Position (σ)</th>
                                <th>Percentile</th>
                                <th>Signal</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Technical Levels Tab -->
        <div id="technical" class="tab-content">
            <div class="section-header">📉 CRITICAL TECHNICAL LEVELS</div>
            
            <div class="data-grid">
                <div class="data-card">
                    <div class="data-card-header">
                        <div class="data-card-title">Key Support/Resistance</div>
                        <span class="status-badge badge-critical">CRITICAL</span>
                    </div>
                    <table class="data-table" id="technicalLevels">
                        <thead>
                            <tr>
                                <th>Asset</th>
                                <th>Current</th>
                                <th>Critical Level</th>
                                <th>Distance</th>
                                <th>Impact if Broken</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Intermarket Tab -->
        <div id="intermarket" class="tab-content">
            <div class="section-header">🔄 INTERMARKET RELATIONSHIPS</div>
            
            <div class="data-grid">
                <div class="data-card">
                    <div class="data-card-header">
                        <div class="data-card-title">Cross-Asset Correlations</div>
                        <span class="status-badge badge-warning">BREAKING DOWN</span>
                    </div>
                    <table class="data-table" id="intermarketData">
                        <thead>
                            <tr>
                                <th>Relationship</th>
                                <th>Current</th>
                                <th>Normal</th>
                                <th>Signal</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Raw Data Tab -->
        <div id="raw" class="tab-content">
            <div class="section-header">💾 RAW DATA FEED</div>
            <div class="terminal" id="rawDataTerminal">
                <pre id="rawDataContent" style="color: var(--primary); white-space: pre-wrap; word-wrap: break-word;">
                    Waiting for data...
                </pre>
            </div>
        </div>

    </div>

    <script>
        // Configuration
        const API_ENDPOINT = 'https://api.justhodl.ai/';
        
        // Global state
        let currentData = null;
        let autoRefreshInterval = null;

        // Initialize dashboard data
        const dashboardData = {
            executive: {
                khalidIndex: 45,
                crisisDistance: 45,
                marketRegime: 'LATE CYCLE',
                vix: 18.50,
                liquidityPressure: 52,
                stressIndex: 0.18
            },
            criticalIndicators: [
                { indicator: 'Market Regime', current: 'LATE CYCLE', crisis: 'CRISIS', distance: '45%', status: 'DISTRIBUTION' },
                { indicator: 'VIX Index', current: '18.50', crisis: '40', distance: '76.8%', status: 'LOW' },
                { indicator: 'Liquidity Pressure', current: '52/100', crisis: '75/100', distance: '31%', status: 'STRESSED' },
                { indicator: 'Stress Index', current: '0.18', crisis: '2.50', distance: '93%', status: 'MODERATE' }
            ],
            keySeries: [
                { series: 'WALCL (Fed Balance)', value: '$6.6T', trend: '↓ Declining', impact: 'QT removing $95B/month' },
                { series: 'RRPONTSYD (ON RRP)', value: '$18.8B', trend: '↓ Collapsing', impact: 'Near zero from $2.6T' },
                { series: 'WTREGEN (TGA)', value: '$870B', trend: '↑ Surging', impact: 'Draining reserves' },
                { series: 'SOFR', value: '5.35%', trend: '↑ Elevated', impact: 'Funding stress' }
            ],
            centralBanks: [
                { bank: 'Federal Reserve', balance: '$6.6T', weekly: '-$22B', monthly: '-$95B', yearly: '-$520B', policy: 'QT AUTO' },
                { bank: 'ECB', balance: '€7.2T', weekly: '-€11B', monthly: '-€45B', yearly: '-€380B', policy: 'TLTRO RUNOFF' },
                { bank: 'BOJ', balance: '¥755T', weekly: '+¥2T', monthly: '+¥8T', yearly: '+¥45T', policy: 'STILL EASING' },
                { bank: 'PBOC', balance: '¥45T', weekly: '+¥0.1T', monthly: '+¥0.5T', yearly: '+¥2.8T', policy: 'STEALTH QE' }
            ],
            repoMarket: [
                { metric: 'Total Repo Fails', current: '$285B/day', normal: '$100B', crisis: '$400B', multiple: '2.85x' },
                { metric: 'SOFR-FF Spread', current: '11.5bp', normal: '2bp', crisis: '25bp', multiple: '5.75x' },
                { metric: 'FRA-OIS', current: '42bp', normal: '10bp', crisis: '80bp', multiple: '4.2x' },
                { metric: 'Primary Dealer Holdings', current: '$285B', normal: '$180B', crisis: '$350B', multiple: '1.58x' }
            ],
            treasuryAuctions: [
                { auction: '10Y (Latest)', grade: 'C+', bidCover: '2.42', indirect: '62%', tail: '3.2' },
                { auction: '30Y (Latest)', grade: 'D', bidCover: '2.21', indirect: '58%', tail: '4.1' },
                { auction: '2Y (Latest)', grade: 'B-', bidCover: '2.65', indirect: '65%', tail: '2.1' }
            ],
            darkPoolActivity: [
                { symbol: 'SPY', darkPool: '$2.3B', vsVWAP: '-0.3%', vs20D: '+180%', signal: 'ACCUMULATION' },
                { symbol: 'QQQ', darkPool: '$850M', vsVWAP: '+0.5%', vs20D: '+45%', signal: 'DISTRIBUTION' },
                { symbol: 'NVDA', darkPool: '$1.2B', vsVWAP: '+0.8%', vs20D: '+220%', signal: 'HEAVY DISTRIBUTION' }
            ],
            optionsFlow: [
                { metric: 'Put/Call Ratio', current: '1.35', percentile: '85th', signal: 'Heavy hedging' },
                { metric: 'Large Blocks (>$1M)', current: '185 Puts vs 125 Calls', percentile: '90th', signal: 'Protection buying' },
                { metric: 'SPX 4200 Puts', current: '$82M premium', percentile: '95th', signal: 'Massive hedge' },
                { metric: 'VIX 30 Calls', current: '$28M premium', percentile: '88th', signal: 'Vol explosion bet' }
            ],
            iceBofaIG: [
                { index: 'IG Index', spread: '128', week: '+5', month: '+15', signal: 'Widening' },
                { index: 'AAA', spread: '85', week: '+3', month: '+8', signal: 'Quality bid' },
                { index: 'BBB', spread: '165', week: '+8', month: '+22', signal: 'Pressure' }
            ],
            iceBofaHY: [
                { index: 'HY Master', spread: '385', week: '+12', month: '+35', signal: 'Risk-off' },
                { index: 'BB', spread: '285', week: '+8', month: '+25', signal: 'Widening' },
                { index: 'CCC', spread: '985', week: '+45', month: '+125', signal: 'Distress' }
            ],
            laborMarket: [
                { metric: 'Unemployment Rate', current: '4.2%', threeMonth: '3.9%', yoy: '3.5%', recession: '5.0%' },
                { metric: 'Initial Claims (4W)', current: '235K', threeMonth: '205K', yoy: '195K', recession: '300K' },
                { metric: 'Job Openings', current: '8.2M', threeMonth: '9.5M', yoy: '11.2M', recession: '6.0M' },
                { metric: 'Quits Rate', current: '2.1%', threeMonth: '2.3%', yoy: '2.8%', recession: '1.8%' }
            ],
            globalPMI: [
                { country: 'United States', pmi: '47.8', newOrders: '45.2', threeMonth: '-2.3', status: 'CONTRACTION' },
                { country: 'China', pmi: '49.2', newOrders: '48.5', threeMonth: '-1.8', status: 'CONTRACTION' },
                { country: 'Germany', pmi: '42.4', newOrders: '40.1', threeMonth: '-3.5', status: 'DEEP RECESSION' },
                { country: 'Japan', pmi: '48.9', newOrders: '47.8', threeMonth: '-0.8', status: 'WEAKENING' }
            ],
            marketInternals: [
                { metric: '% Stocks >50DMA', spx: '42%', ndx: '35%', rut: '28%', signal: 'DISTRIBUTION' },
                { metric: '% Stocks >200DMA', spx: '61%', ndx: '48%', rut: '39%', signal: 'BREAKDOWN' },
                { metric: 'New Highs-Lows', spx: '-412', ndx: '-285', rut: '-520', signal: 'NEGATIVE' },
                { metric: 'Advance/Decline', spx: '0.65', ndx: '0.58', rut: '0.45', signal: 'SELLING' }
            ],
            dealerPositioning: [
                { metric: 'Gamma Exposure (GEX)', current: '-$2.1B', crisis: '-$5B', distance: '58%' },
                { metric: 'Zero Gamma Level', current: 'SPX 4420', crisis: '4350', distance: '70 pts' },
                { metric: 'Dark Index (DIX)', current: '47.2%', crisis: '<38%', distance: '24%' },
                { metric: 'Vanna Exposure', current: '+$450M', crisis: '+$1B', distance: '55%' }
            ]
        };

        // Fetch all data from API
        async function fetchAllData() {
            const startTime = Date.now();
            document.getElementById('lastUpdate').textContent = 'Fetching...';
            
            try {
                const response = await fetch(API_ENDPOINT, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ operation: 'data' })
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }
                
                const data = await response.json();
                currentData = data;
                
                const responseTime = Date.now() - startTime;
                document.getElementById('responseTime').textContent = `${responseTime}ms`;
                document.getElementById('lastUpdate').textContent = new Date().toLocaleTimeString();
                
                // Process and display data
                processData(data);
                
                // Update raw data view
                document.getElementById('rawDataContent').textContent = JSON.stringify(data, null, 2);
                
                // Count data points
                const dataPoints = countDataPoints(data);
                document.getElementById('dataPoints').textContent = dataPoints;
                
            } catch (error) {
                console.error('Failed to fetch data:', error);
                document.getElementById('lastUpdate').textContent = 'Error';
                
                // Load default data
                populateDashboard();
            }
        }

        // Process fetched data
        function processData(data) {
            // Extract and update dashboard with real data
            // This would map the actual data structure from your API
            // For now, populate with default data
            populateDashboard();
        }

        // Count data points
        function countDataPoints(obj) {
            let count = 0;
            function traverse(o) {
                for (let key in o) {
                    if (o.hasOwnProperty(key)) {
                        count++;
                        if (typeof o[key] === 'object' && o[key] !== null) {
                            traverse(o[key]);
                        }
                    }
                }
            }
            traverse(obj);
            return count;
        }

        // Populate dashboard with data
        function populateDashboard() {
            // Update header
            document.getElementById('crisisDistance').textContent = `${dashboardData.executive.crisisDistance}%`;
            document.getElementById('khalidIndex').textContent = `${dashboardData.executive.khalidIndex}/100`;
            
            // Populate Executive Metrics
            const executiveMetrics = document.getElementById('executiveMetrics');
            if (executiveMetrics) {
                executiveMetrics.innerHTML = `
                    <div class="metric-card">
                        <div class="metric-label">VIX INDEX</div>
                        <div class="metric-value">${dashboardData.executive.vix}</div>
                        <div class="metric-change change-positive">+12.3%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">LIQUIDITY PRESSURE</div>
                        <div class="metric-value">${dashboardData.executive.liquidityPressure}/100</div>
                        <div class="metric-change change-negative">+18.5%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">STRESS INDEX</div>
                        <div class="metric-value">${dashboardData.executive.stressIndex}</div>
                        <div class="metric-change change-negative">+0.08</div>
                    </div>
                    <div class="metric-card critical">
                        <div class="metric-label">SAHM RULE</div>
                        <div class="metric-value">0.33</div>
                        <div class="metric-change">Trigger: 0.50</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">SPX</div>
                        <div class="metric-value">4,502</div>
                        <div class="metric-change change-positive">+0.38%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">10Y YIELD</div>
                        <div class="metric-value">4.42%</div>
                        <div class="metric-change change-negative">+2bp</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">DXY</div>
                        <div class="metric-value">105.2</div>
                        <div class="metric-change change-positive">+0.15%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">BITCOIN</div>
                        <div class="metric-value">$115,376</div>
                        <div class="metric-change change-positive">+2.45%</div>
                    </div>
                `;
            }
            
            // Populate tables
            populateTable('criticalIndicators', dashboardData.criticalIndicators);
            populateTable('keySeries', dashboardData.keySeries);
            populateTable('cbLiquidity', dashboardData.centralBanks);
            populateTable('repoMarket', dashboardData.repoMarket);
            populateTable('treasuryAuctions', dashboardData.treasuryAuctions);
            populateTable('darkPoolActivity', dashboardData.darkPoolActivity);
            populateTable('optionsFlow', dashboardData.optionsFlow);
            populateTable('igIndices', dashboardData.iceBofaIG);
            populateTable('hyIndices', dashboardData.iceBofaHY);
            populateTable('laborMetrics', dashboardData.laborMarket);
            populateTable('pmiData', dashboardData.globalPMI);
            populateTable('marketInternals', dashboardData.marketInternals);
            populateTable('dealerPositioning', dashboardData.dealerPositioning);
        }

        // Populate table helper
        function populateTable(tableId, data) {
            const tbody = document.querySelector(`#${tableId} tbody`);
            if (!tbody || !data) return;
            
            tbody.innerHTML = '';
            
            data.forEach(row => {
                const tr = document.createElement('tr');
                Object.values(row).forEach(value => {
                    const td = document.createElement('td');
                    
                    // Apply color coding based on value
                    if (typeof value === 'string') {
                        if (value.includes('CONTRACTION') || value.includes('RECESSION')) {
                            td.className = 'risk-extreme';
                        } else if (value.includes('STRESSED') || value.includes('WIDENING')) {
                            td.className = 'risk-high';
                        } else if (value.includes('MODERATE') || value.includes('WEAKENING')) {
                            td.className = 'risk-medium';
                        } else if (value.includes('↓') || value.startsWith('-')) {
                            td.className = 'risk-high';
                        } else if (value.includes('↑') || value.startsWith('+')) {
                            td.className = 'risk-low';
                        }
                    }
                    
                    td.textContent = value;
                    tr.appendChild(td);
                });
                tbody.appendChild(tr);
            });
        }

        // Switch tabs
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Toggle auto-refresh
        function toggleAutoRefresh() {
            const btn = document.getElementById('autoRefreshBtn');
            
            if (autoRefreshInterval) {
                clearInterval(autoRefreshInterval);
                autoRefreshInterval = null;
                btn.textContent = 'AUTO-REFRESH OFF';
            } else {
                autoRefreshInterval = setInterval(fetchAllData, 30000); // 30 seconds
                btn.textContent = 'AUTO-REFRESH ON';
                fetchAllData(); // Fetch immediately
            }
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            populateDashboard();
            fetchAllData();
            
            // Auto-enable refresh after 5 seconds
            setTimeout(() => {
                toggleAutoRefresh();
            }, 5000);
        });
    </script>
</body>
</html>
