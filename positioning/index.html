<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>JustHodl.AI | Futures Positioning Intelligence</title>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root{--bg0:#06090f;--bg1:#0c1220;--bg2:#111b2e;--bg3:#172038;--brd:#1a2744;--brd2:#243352;--t1:#e8edf5;--t2:#8896b0;--t3:#5a6a85;--green:#00e68a;--red:#ff4757;--yellow:#ffd43b;--blue:#4dabf7;--purple:#b197fc;--cyan:#22d3ee;--orange:#ff922b;--bg-card:linear-gradient(145deg,#0e1628,#131f35)}
*{margin:0;padding:0;box-sizing:border-box}body{background:var(--bg0);color:var(--t1);font-family:DM Sans,sans-serif;overflow-x:hidden}.mono{font-family:JetBrains Mono,monospace}
.topbar{background:linear-gradient(180deg,#080d18,var(--bg0));border-bottom:1px solid var(--brd);padding:14px 28px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:100;backdrop-filter:blur(12px)}.topbar-left{display:flex;align-items:center;gap:14px}
.logo{font-size:22px;font-weight:700;background:linear-gradient(135deg,#00e68a,#4dabf7);-webkit-background-clip:text;-webkit-text-fill-color:transparent;letter-spacing:-.5px;text-decoration:none}
.logo-sub{font-size:10px;color:var(--t3);letter-spacing:3px;text-transform:uppercase;font-family:JetBrains Mono,monospace}
.live-dot{width:8px;height:8px;background:var(--green);border-radius:50%;animation:pulse 2s infinite;display:inline-block}@keyframes pulse{0%,100%{opacity:1;box-shadow:0 0 0 0 rgba(0,230,138,.4)}50%{opacity:.7;box-shadow:0 0 0 8px rgba(0,230,138,0)}}
.topbar-right{display:flex;align-items:center;gap:16px;font-size:12px;color:var(--t2);font-family:JetBrains Mono,monospace}
.back-link{color:var(--blue);text-decoration:none;font-size:12px;font-family:JetBrains Mono,monospace;padding:6px 12px;border:1px solid var(--brd);border-radius:6px;transition:.2s}.back-link:hover{border-color:var(--blue);background:rgba(77,171,247,.08)}
.container{max-width:1600px;margin:0 auto;padding:20px 24px}
.grid-hero{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:14px;margin-bottom:20px}.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-bottom:20px}.grid-sectors{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px;margin-bottom:20px}
.card{background:var(--bg-card);border:1px solid var(--brd);border-radius:12px;padding:18px;position:relative;overflow:hidden;transition:.2s}.card:hover{border-color:var(--brd2);transform:translateY(-1px)}
.card::before{content:"";position:absolute;top:0;left:0;right:0;height:2px;border-radius:12px 12px 0 0}
.card-green::before{background:linear-gradient(90deg,var(--green),transparent)}.card-red::before{background:linear-gradient(90deg,var(--red),transparent)}.card-blue::before{background:linear-gradient(90deg,var(--blue),transparent)}.card-yellow::before{background:linear-gradient(90deg,var(--yellow),transparent)}.card-purple::before{background:linear-gradient(90deg,var(--purple),transparent)}.card-cyan::before{background:linear-gradient(90deg,var(--cyan),transparent)}
.card-label{font-size:11px;color:var(--t3);letter-spacing:1.5px;text-transform:uppercase;font-family:JetBrains Mono,monospace;margin-bottom:6px}.card-value{font-size:32px;font-weight:700;font-family:JetBrains Mono,monospace;line-height:1.1}.card-sub{font-size:12px;color:var(--t2);margin-top:4px}
.gauge-wrap{position:relative;height:10px;background:var(--bg0);border-radius:8px;margin:10px 0 4px;overflow:hidden}.gauge-fill{height:100%;border-radius:8px;transition:width .8s ease}
.sec-head{display:flex;align-items:center;gap:10px;margin-bottom:14px;padding-bottom:8px;border-bottom:1px solid var(--brd)}.sec-title{font-size:15px;font-weight:600}.sec-badge{font-size:10px;font-family:JetBrains Mono,monospace;padding:3px 8px;border-radius:4px;background:rgba(77,171,247,.12);color:var(--blue)}
.sector-card{background:var(--bg-card);border:1px solid var(--brd);border-radius:10px;padding:14px;transition:.2s}.sector-card:hover{border-color:var(--brd2)}.sector-name{font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px}.sector-bias{font-size:20px;font-weight:700;font-family:JetBrains Mono,monospace}
.sector-bar{display:flex;height:6px;border-radius:4px;overflow:hidden;margin:8px 0;background:var(--bg0)}.sector-bar-bull{background:var(--green);transition:width .6s}.sector-bar-bear{background:var(--red);transition:width .6s}.sector-bar-neut{background:var(--t3);transition:width .6s}.sector-detail{font-size:11px;color:var(--t2);font-family:JetBrains Mono,monospace}
.contracts-table{width:100%;border-collapse:separate;border-spacing:0;font-size:12px}.contracts-table th{text-align:left;padding:10px 12px;font-size:10px;letter-spacing:1.5px;text-transform:uppercase;color:var(--t3);font-family:JetBrains Mono,monospace;border-bottom:1px solid var(--brd);position:sticky;top:0;background:var(--bg1);z-index:1}
.contracts-table td{padding:10px 12px;border-bottom:1px solid rgba(26,39,68,.5);font-family:JetBrains Mono,monospace;font-size:12px}.contracts-table tr:hover td{background:rgba(77,171,247,.03)}
.pill{display:inline-block;padding:2px 8px;border-radius:4px;font-size:10px;font-weight:600;font-family:JetBrains Mono,monospace}.pill-bull{background:rgba(0,230,138,.12);color:var(--green)}.pill-bear{background:rgba(255,71,87,.12);color:var(--red)}.pill-neut{background:rgba(137,150,176,.12);color:var(--t2)}
.pill-extreme{background:rgba(255,212,59,.15);color:var(--yellow);border:1px solid rgba(255,212,59,.3)}.pill-reversal{background:rgba(255,71,87,.2);color:var(--red);border:1px solid rgba(255,71,87,.4);animation:blink 1.5s infinite}@keyframes blink{0%,100%{opacity:1}50%{opacity:.6}}
.extreme-item{background:var(--bg-card);border:1px solid var(--brd);border-radius:10px;padding:14px;margin-bottom:10px;border-left:3px solid var(--yellow)}.extreme-item.reversal{border-left-color:var(--red)}.extreme-name{font-size:14px;font-weight:600;margin-bottom:4px}.extreme-detail{font-size:11px;color:var(--t2);font-family:JetBrains Mono,monospace}
.loading{display:flex;align-items:center;justify-content:center;min-height:60vh;flex-direction:column;gap:16px}.spinner{width:40px;height:40px;border:3px solid var(--brd);border-top-color:var(--green);border-radius:50%;animation:spin .8s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}
.sparkline{display:block}.table-wrap{overflow-x:auto;background:var(--bg1);border:1px solid var(--brd);border-radius:12px;max-height:600px;overflow-y:auto}
.cat-tabs{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:16px}.cat-tab{padding:6px 14px;border-radius:6px;font-size:11px;font-family:JetBrains Mono,monospace;cursor:pointer;border:1px solid var(--brd);background:transparent;color:var(--t2);transition:.2s;text-transform:uppercase;letter-spacing:.5px}.cat-tab:hover{border-color:var(--brd2);color:var(--t1)}.cat-tab.active{background:rgba(0,230,138,.1);border-color:var(--green);color:var(--green)}
@media(max-width:1200px){.grid-hero{grid-template-columns:1fr 1fr}}@media(max-width:768px){.grid-hero,.grid-2{grid-template-columns:1fr}.container{padding:12px}}
</style>
</head>
<body>
<div class="topbar"><div class="topbar-left"><a href="https://justhodl.ai" class="logo">JUSTHODL.AI</a><div class="logo-sub">Futures Positioning Intelligence</div></div><div class="topbar-right"><span><span class="live-dot"></span> LIVE</span><span id="timestamp">Loading...</span><a href="http://justhodl-dashboard-live.s3-website-us-east-1.amazonaws.com" class="back-link">Terminal</a></div></div>
<div class="container"><div id="app"><div class="loading"><div class="spinner"></div><div style="color:var(--t2);font-size:13px;font-family:JetBrains Mono,monospace">Loading CFTC Positioning Data...</div></div></div></div>
<script>
var API="https://35t3serkv4gn2hk7utwvp7t2sa0flbum.lambda-url.us-east-1.on.aws",DATA=null,activeCategory="all";
var ICONS={equity_index:"\u{1F4C8}",treasury:"\u{1F3E6}",currency:"\u{1F4B1}",energy:"\u26FD",metals:"\u{1F7E1}",agriculture:"\u{1F33E}",volatility:"\u26A1"};
async function loadData(){try{var r=await Promise.all([fetch(API+"/signals?t="+Date.now()),fetch(API+"/cot/all?t="+Date.now()),fetch(API+"/futures?t="+Date.now())]);var sig=await r[0].json(),cot=await r[1].json(),fut=await r[2].json();DATA={signals:sig,cot:cot.data||{},futures:fut.data||{}};render();document.getElementById("timestamp").textContent=new Date().toLocaleTimeString()}catch(e){console.error(e);document.getElementById("app").innerHTML='<div class="loading" style="color:var(--red)">Failed. Retrying...</div>';setTimeout(loadData,5000)}}
function cc(v,p){return v>0||p==="BULLISH"?"var(--green)":v<0||p==="BEARISH"?"var(--red)":"var(--t2)"}
function fmt(n){if(n==null)return"--";if(Math.abs(n)>=1e6)return(n/1e6).toFixed(1)+"M";if(Math.abs(n)>=1e3)return(n/1e3).toFixed(1)+"K";return n.toFixed?n.toFixed(1):String(n)}
function pct(v){return v!=null?v.toFixed(1)+"%":"--"}
function sparkSVG(data,key){var w=120,h=30;if(!data||data.length<2)return"";var vals=data.map(function(d){return d[key]}).filter(function(v){return v!=null}).reverse();if(vals.length<2)return"";var mn=Math.min.apply(null,vals),mx=Math.max.apply(null,vals),rng=mx-mn||1;var pts=vals.map(function(v,i){return(i/(vals.length-1))*w+","+(h-((v-mn)/rng)*h)}).join(" ");var col=vals[vals.length-1]>=0?"var(--green)":"var(--red)";return'<svg class="sparkline" width="'+w+'" height="'+h+'"><polyline fill="none" stroke="'+col+'" stroke-width="1.5" points="'+pts+'"/></svg>'}
function crisisColor(s){return s>=75?"var(--red)":s>=50?"var(--orange)":s>=25?"var(--yellow)":"var(--green)"}
function biasColor(b){return b==="BULLISH"?"var(--green)":b==="BEARISH"?"var(--red)":"var(--t2)"}
function render(){var s=DATA.signals,cot=DATA.cot,fut=DATA.futures,ps=s.positioning_score||0,ra=s.risk_appetite||0,cs=(s.crisis_indicators||{}).score||0,sm=s.smart_money||"NEUTRAL",ex=s.extreme_positions||[],rv=s.reversal_candidates||[],sec=s.sector_positioning||{},o="";
o+='<div class="grid-hero">';
o+='<div class="card card-'+(ps>20?"green":ps<-20?"red":"blue")+'"><div class="card-label">Market Positioning</div><div class="card-value" style="color:'+cc(ps)+'">'+(ps>0?"+":"")+ps+'</div><div class="card-sub">-100 bearish to +100 bullish</div><div class="gauge-wrap"><div class="gauge-fill" style="width:'+(ps+100)/2+'%;background:linear-gradient(90deg,var(--red),var(--yellow),var(--green))"></div></div></div>';
o+='<div class="card card-cyan"><div class="card-label">Risk Appetite</div><div class="card-value" style="color:'+(ra>60?"var(--green)":ra<40?"var(--red)":"var(--yellow)")+'">'+ra.toFixed(1)+'</div><div class="card-sub">0 risk-off to 100 risk-on</div><div class="gauge-wrap"><div class="gauge-fill" style="width:'+ra+'%;background:linear-gradient(90deg,var(--red),var(--yellow),var(--green))"></div></div></div>';
o+='<div class="card card-'+(cs>=50?"red":cs>=25?"yellow":"green")+'"><div class="card-label">Crisis Score</div><div class="card-value" style="color:'+crisisColor(cs)+'">'+cs+'<span style="font-size:16px;color:var(--t3)">/100</span></div><div class="card-sub">'+((s.crisis_indicators||{}).level||"N/A")+'</div><div class="gauge-wrap"><div class="gauge-fill" style="width:'+cs+'%;background:'+crisisColor(cs)+'"></div></div></div>';
o+='<div class="card card-purple"><div class="card-label">Smart Money Flow</div><div class="card-value" style="font-size:22px;color:'+(sm==="ACCUMULATING"?"var(--green)":sm==="DISTRIBUTING"?"var(--red)":"var(--t2)")+'">'+sm+'</div><div class="card-sub" style="margin-top:8px">VIX: <span style="color:'+biasColor((s.crisis_indicators||{}).vix_positioning)+'">'+((s.crisis_indicators||{}).vix_positioning||"N/A")+'</span> | Treasury: <span style="color:'+biasColor((s.crisis_indicators||{}).treasury_flight)+'">'+((s.crisis_indicators||{}).treasury_flight||"N/A")+'</span> | Gold: <span style="color:'+biasColor((s.crisis_indicators||{}).gold_safe_haven)+'">'+((s.crisis_indicators||{}).gold_safe_haven||"N/A")+'</span></div></div>';
o+='</div>';
o+='<div class="sec-head"><span class="sec-title">Sector Positioning</span><span class="sec-badge">'+Object.keys(sec).length+' SECTORS</span></div><div class="grid-sectors">';
for(var cat in sec){var d=sec[cat],t=d.total||1,bp=(d.bullish/t)*100,brp=(d.bearish/t)*100,np=100-bp-brp;o+='<div class="sector-card"><div class="sector-name">'+(ICONS[cat]||"")+" "+cat.replace(/_/g," ")+'</div><div class="sector-bias" style="color:'+biasColor(d.bias)+'">'+d.bias+'</div><div class="sector-bar"><div class="sector-bar-bull" style="width:'+bp+'%"></div><div class="sector-bar-neut" style="width:'+np+'%"></div><div class="sector-bar-bear" style="width:'+brp+'%"></div></div><div class="sector-detail">'+d.bullish+' bull '+d.bearish+' bear of '+d.total+'</div></div>'}
o+='</div>';
if(ex.length>0||rv.length>0){o+='<div class="grid-2"><div><div class="sec-head"><span class="sec-title">Extreme Positions</span><span class="sec-badge">'+ex.length+' CROWDED</span></div>';ex.forEach(function(e){var ir=e.risk==="HIGH REVERSAL RISK";o+='<div class="extreme-item '+(ir?"reversal":"")+'"><div class="extreme-name">'+e.contract+' - '+e.name+(ir?' <span class="pill pill-reversal">REVERSAL RISK</span>':'')+'</div><div class="extreme-detail">Ratio: '+pct(e.ratio)+' long | Net: '+fmt(e.net_position)+' | '+e.risk+'</div></div>'});
o+='</div><div><div class="sec-head"><span class="sec-title">Reversal Candidates</span><span class="sec-badge">'+rv.length+' SIGNALS</span></div>';if(rv.length===0)o+='<div style="color:var(--t3);padding:20px;text-align:center">No active reversal signals</div>';rv.forEach(function(r){o+='<div class="extreme-item reversal"><div class="extreme-name">'+r.contract+' - '+r.name+' <span class="pill pill-'+(r.trend==="BULLISH"?"bull":"bear")+'">'+r.trend+'</span></div><div class="extreme-detail">'+r.positioning+'</div></div>'});o+='</div></div>'}
var cats=["all"];Object.values(cot).forEach(function(c){if(cats.indexOf(c.category)<0)cats.push(c.category)});
o+='<div class="sec-head"><span class="sec-title">All Contracts</span><span class="sec-badge">'+Object.keys(cot).length+' CONTRACTS</span></div><div class="cat-tabs">';cats.forEach(function(cat){o+='<div class="cat-tab '+(activeCategory===cat?"active":"")+'" onclick="filterCategory(\''+cat+'\')">'+cat.replace(/_/g," ")+'</div>'});o+='</div>';
o+='<div class="table-wrap"><table class="contracts-table"><thead><tr><th>Contract</th><th>Name</th><th>Category</th><th>Trend</th><th>Strength</th><th>Net Spec</th><th>Wk Chg</th><th>Long%</th><th>Net Comm</th><th>OI</th><th>8-Wk</th><th>Signal</th></tr></thead><tbody>';
var sorted=Object.entries(cot).sort(function(a,b){return Math.abs((b[1].signals||{}).strength||0)-Math.abs((a[1].signals||{}).strength||0)});
sorted.forEach(function(p){var k=p[0],d=p[1];if(activeCategory!=="all"&&d.category!==activeCategory)return;var sg=d.signals||{},cu=d.current||{},tc=sg.trend==="BULLISH"?"pill-bull":sg.trend==="BEARISH"?"pill-bear":"pill-neut",ie=sg.extreme,wc=sg.weekly_change||0,sp=sparkSVG(d.weekly_reports,"net_speculator"),fd=fut[k];
o+='<tr><td style="font-weight:600;color:var(--t1)">'+k+'</td><td style="color:var(--t2)">'+d.name+'</td><td style="font-size:10px;color:var(--t3);text-transform:uppercase">'+((d.category)||"").replace(/_/g," ")+'</td><td><span class="pill '+tc+'">'+(sg.trend||"N/A")+'</span></td><td style="color:'+cc(sg.strength)+'">'+((sg.strength)||0).toFixed(1)+'%</td><td style="color:'+cc(cu.net_speculator)+';font-weight:600">'+fmt(cu.net_speculator)+'</td><td style="color:'+cc(wc)+'">'+(wc>0?"+":"")+fmt(wc)+'</td><td>'+(ie?'<span class="pill pill-extreme">':"")+pct(cu.speculator_long_ratio)+(ie?"</span>":"")+'</td><td style="color:'+cc(cu.net_commercial)+'">'+fmt(cu.net_commercial)+'</td><td style="color:var(--t2)">'+fmt(cu.open_interest)+'</td><td>'+sp+'</td><td style="font-size:10px;color:var(--t2);max-width:150px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap">'+((sg.description)||"")+'</td></tr>'});
o+='</tbody></table></div>';
var fk=Object.keys(fut);if(fk.length>0){o+='<div style="margin-top:20px"><div class="sec-head"><span class="sec-title">Real-Time Prices</span><span class="sec-badge">POLYGON.IO</span></div><div class="grid-sectors">';fk.forEach(function(k){var f=fut[k],ch=f.change_pct||0;o+='<div class="sector-card"><div class="sector-name" style="font-size:11px">'+k+' - '+f.name+'</div><div style="font-size:22px;font-weight:700;font-family:JetBrains Mono,monospace;color:var(--t1)">'+(f.close!=null?f.close.toLocaleString(undefined,{minimumFractionDigits:2}):"--")+'</div><div style="font-size:13px;font-family:JetBrains Mono,monospace;color:'+cc(ch)+';margin-top:4px">'+(ch>0?"+":"")+ch.toFixed(2)+'%</div><div class="sector-detail" style="margin-top:6px">H: '+(f.high?f.high.toLocaleString():"--")+' | L: '+(f.low?f.low.toLocaleString():"--")+(f.volume?" | Vol: "+fmt(f.volume):"")+'</div></div>'});o+='</div></div>'}
o+='<div style="margin-top:20px"><div class="sec-head"><span class="sec-title">AI Summary</span></div><div class="card card-blue" style="font-family:JetBrains Mono,monospace;font-size:12px;line-height:1.8;color:var(--t2)">'+(s.summary||"No summary")+'</div></div>';
o+='<div style="margin-top:30px;padding:16px;text-align:center;color:var(--t3);font-size:11px;font-family:JetBrains Mono,monospace;border-top:1px solid var(--brd)">CFTC.gov COT + Polygon.io | 29 Contracts | 7 Asset Classes | Fridays 6PM UTC<br><a href="https://justhodl.ai" style="color:var(--blue);text-decoration:none">justhodl.ai</a> | <a href="http://justhodl-dashboard-live.s3-website-us-east-1.amazonaws.com" style="color:var(--blue);text-decoration:none">Terminal</a></div>';
document.getElementById("app").innerHTML=o}
function filterCategory(cat){activeCategory=cat;render()}
loadData();setInterval(loadData,300000);
</script>
</body>
</html>
