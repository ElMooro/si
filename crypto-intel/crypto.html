<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>JustHodl.AI | Crypto Intelligence Terminal</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;500;600;700&family=IBM+Plex+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
:root{--bg:#050810;--bg1:#0a0f1a;--bg2:#0f1524;--bg3:#141c2e;--bg4:#1a2338;--brd:#1a2540;--brd2:#243050;--t1:#e8ecf4;--t2:#8b95ad;--t3:#5a6580;--green:#00e676;--green2:#00c853;--gbg:rgba(0,230,118,.06);--red:#ff1744;--red2:#d50000;--rbg:rgba(255,23,68,.06);--yellow:#ffc400;--ybg:rgba(255,196,0,.06);--blue:#2979ff;--bbg:rgba(41,121,255,.06);--cyan:#00e5ff;--purple:#7c4dff;--orange:#ff6d00}
*{margin:0;padding:0;box-sizing:border-box}
body{background:var(--bg);color:var(--t1);font-family:'IBM Plex Sans',system-ui,sans-serif;min-height:100vh;overflow-x:hidden}
.mono{font-family:'IBM Plex Mono',monospace}
.hdr{background:linear-gradient(180deg,rgba(10,15,30,.98),var(--bg));border-bottom:1px solid var(--brd);padding:10px 20px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:200;backdrop-filter:blur(24px)}
.hdr-l{display:flex;align-items:center;gap:14px}
.logo{font-size:18px;font-weight:700;background:linear-gradient(135deg,var(--orange),var(--yellow));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.logo-sub{font-size:10px;color:var(--t3);text-transform:uppercase;letter-spacing:3px}
.hdr-r{display:flex;align-items:center;gap:16px;font-size:11px;color:var(--t2)}
.dot{width:7px;height:7px;border-radius:50%;background:var(--green);animation:pulse 2s infinite;box-shadow:0 0 8px var(--green)}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
.tabs{display:flex;gap:2px;background:var(--bg1);border-bottom:1px solid var(--brd);padding:0 16px;overflow-x:auto}
.tab{padding:8px 14px;cursor:pointer;font-size:11px;color:var(--t3);border-bottom:2px solid transparent;transition:all .2s;white-space:nowrap}
.tab:hover{color:var(--t2);background:var(--bg2)}
.tab.active{color:var(--cyan);border-bottom-color:var(--cyan);background:var(--bg2)}
.container{padding:16px;max-width:1400px;margin:0 auto}
.grid{display:grid;gap:12px}
.g2{grid-template-columns:1fr 1fr}
.g3{grid-template-columns:1fr 1fr 1fr}
.g4{grid-template-columns:1fr 1fr 1fr 1fr}
.card{background:var(--bg2);border:1px solid var(--brd);border-radius:8px;padding:14px;overflow:hidden}
.card-title{font-size:11px;color:var(--t3);text-transform:uppercase;letter-spacing:1px;margin-bottom:10px;display:flex;align-items:center;gap:6px}
.risk-gauge{text-align:center;padding:20px}
.risk-score{font-size:56px;font-weight:700;line-height:1}
.risk-label{font-size:14px;font-weight:600;margin-top:4px}
.risk-bar{height:8px;background:var(--bg4);border-radius:4px;margin:12px 0;position:relative;overflow:hidden}
.risk-fill{height:100%;border-radius:4px;transition:width .6s ease}
.metric{display:flex;justify-content:space-between;align-items:center;padding:6px 0;border-bottom:1px solid var(--brd)}
.metric:last-child{border-bottom:none}
.metric-name{font-size:11px;color:var(--t2)}
.metric-val{font-size:12px;font-weight:600;font-family:'IBM Plex Mono',monospace}
.up{color:var(--green)}
.dn{color:var(--red)}
.nt{color:var(--yellow)}
.signal{display:inline-block;padding:2px 8px;border-radius:4px;font-size:10px;font-weight:600}
.sig-mint{background:var(--gbg);color:var(--green)}
.sig-burn{background:var(--rbg);color:var(--red)}
.sig-stable{background:var(--ybg);color:var(--yellow)}
.sig-inflow{background:var(--gbg);color:var(--green)}
.sig-outflow{background:var(--rbg);color:var(--red)}
.sig-neutral{background:rgba(255,255,255,.05);color:var(--t2)}
table{width:100%;border-collapse:collapse;font-size:11px}
th{text-align:left;padding:6px 8px;color:var(--t3);font-weight:500;border-bottom:1px solid var(--brd2);font-size:10px;text-transform:uppercase;letter-spacing:.5px}
td{padding:5px 8px;border-bottom:1px solid var(--brd)}
tr:hover{background:rgba(255,255,255,.02)}
.pane{display:none}
.pane.active{display:block}
.alert-box{padding:10px 14px;border-radius:6px;margin-bottom:8px;font-size:12px;display:flex;align-items:center;gap:8px}
.alert-red{background:var(--rbg);border:1px solid rgba(255,23,68,.2)}
.alert-green{background:var(--gbg);border:1px solid rgba(0,230,118,.2)}
.alert-yellow{background:var(--ybg);border:1px solid rgba(255,196,0,.2)}
.fg-gauge{width:100%;height:20px;border-radius:10px;background:linear-gradient(90deg,#ff1744,#ff6d00,#ffc400,#76ff03,#00e676);position:relative;margin:8px 0}
.fg-needle{position:absolute;top:-4px;width:4px;height:28px;background:#fff;border-radius:2px;transition:left .6s ease;box-shadow:0 0 8px rgba(255,255,255,.5)}
.stat-big{font-size:28px;font-weight:700;line-height:1}
.stat-sm{font-size:11px;color:var(--t3)}
.back-link{color:var(--cyan);text-decoration:none;font-size:11px;padding:4px 10px;border:1px solid var(--brd2);border-radius:5px}
.back-link:hover{background:rgba(0,229,255,.06)}
.loading{text-align:center;padding:60px 20px;color:var(--t3)}
.loading .spinner{width:40px;height:40px;border:3px solid var(--brd2);border-top-color:var(--cyan);border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 16px}
@keyframes spin{to{transform:rotate(360deg)}}
@media(max-width:900px){.g2,.g3,.g4{grid-template-columns:1fr}.tabs{flex-wrap:wrap}}
.nav-links{display:flex;gap:8px;font-size:11px}
.nav-links a{color:var(--t3);text-decoration:none;padding:3px 8px;border:1px solid var(--brd);border-radius:4px;transition:all .2s}
.nav-links a:hover{color:var(--cyan);border-color:var(--cyan)}
</style>
</head>
<body>
<div class="hdr">
  <div class="hdr-l">
    <div><div class="logo">ü™ô CRYPTO INTEL</div><div class="logo-sub">JustHodl.AI Terminal</div></div>
  </div>
  <div class="hdr-r">
    <div class="nav-links">
      <a href="http://justhodl-dashboard-live.s3-website-us-east-1.amazonaws.com/">üìä Main Terminal</a>
      <a href="https://justhodl.ai">üè† JustHodl.AI</a>
    </div>
    <span id="ts" class="mono" style="font-size:10px">Loading...</span>
    <span style="display:flex;align-items:center;gap:5px"><span class="dot"></span> LIVE</span>
  </div>
</div>

<div class="tabs" id="tabs">
  <div class="tab active" data-tab="overview">üìä Overview</div>
  <div class="tab" data-tab="stablecoins">üí∞ Stablecoins</div>
  <div class="tab" data-tab="tvl">üèóÔ∏è DeFi TVL</div>
  <div class="tab" data-tab="derivatives">üìà Derivatives</div>
  <div class="tab" data-tab="sentiment">üß† Sentiment</div>
  <div class="tab" data-tab="global">üåç Global Market</div>
  <div class="tab" data-tab="onchain">‚õìÔ∏è BTC On-Chain</div>
  <div class="tab" data-tab="dex">üîÑ DEX Volume</div>
  <div class="tab" data-tab="yields">üíé DeFi Yields</div>
</div>

<div class="container" id="main">
  <div class="loading"><div class="spinner"></div><div>Loading Crypto Intelligence...</div></div>
</div>

<script>
const DU="https://justhodl-dashboard-live.s3.amazonaws.com/crypto-intel.json";
let D=null;

// Tab switching
document.getElementById('tabs').addEventListener('click',function(e){
  if(!e.target.classList.contains('tab'))return;
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  e.target.classList.add('active');
  document.querySelectorAll('.pane').forEach(p=>p.classList.remove('active'));
  const p=document.getElementById('pane-'+e.target.dataset.tab);
  if(p)p.classList.add('active');
});

function cl(v,rev){if(v==null)return'';v=parseFloat(v);if(rev)v=-v;return v>0?'up':v<0?'dn':'nt'}
function pct(v){if(v==null)return'-';v=parseFloat(v);return(v>0?'+':'')+v.toFixed(2)+'%'}
function sig(type){
  const m={'MINTING':'sig-mint','BURNING':'sig-burn','STABLE':'sig-stable','INFLOW':'sig-inflow','OUTFLOW':'sig-outflow','NEUTRAL':'sig-neutral'};
  return '<span class="signal '+(m[type]||'sig-neutral')+'">'+type+'</span>';
}

function render(){
  if(!D){document.getElementById('main').innerHTML='<div class="loading" style="color:var(--red)">Failed to load data</div>';return}
  
  const R=D.risk_score||{};
  const ts=D.generated_at||'?';
  document.getElementById('ts').textContent=ts.replace('T',' ').replace('Z',' UTC');
  
  let h='';
  
  // ‚ïê‚ïê OVERVIEW ‚ïê‚ïê
  h+='<div class="pane active" id="pane-overview">';
  
  // Risk Score Banner
  const rClr=R.score>=75?'var(--red)':R.score>=60?'var(--orange)':R.score>=40?'var(--yellow)':R.score>=25?'var(--green2)':'var(--green)';
  h+='<div class="grid g4" style="margin-bottom:12px">';
  h+='<div class="card risk-gauge" style="grid-column:span 2"><div class="card-title">üéØ Composite Risk Score</div>';
  h+='<div class="risk-score" style="color:'+rClr+'">'+R.score+'</div>';
  h+='<div class="risk-label" style="color:'+rClr+'">'+R.regime+'</div>';
  h+='<div class="risk-bar"><div class="risk-fill" style="width:'+R.score+'%;background:'+rClr+'"></div></div>';
  h+='<div style="font-size:12px;color:var(--t2)">'+R.action+'</div></div>';
  
  // Fear & Greed
  const fg=D.fear_greed||{};
  const fgv=fg.current||50;
  const fgClr=fgv<25?'var(--red)':fgv<45?'var(--orange)':fgv<55?'var(--yellow)':fgv<75?'var(--green2)':'var(--green)';
  h+='<div class="card"><div class="card-title">üò± Fear & Greed</div>';
  h+='<div class="stat-big" style="color:'+fgClr+'">'+fgv+'</div>';
  h+='<div style="font-size:12px;color:'+fgClr+';font-weight:600">'+fg.label+'</div>';
  h+='<div class="fg-gauge"><div class="fg-needle" style="left:'+fgv+'%"></div></div>';
  h+='<div class="metric"><span class="metric-name">7D Avg</span><span class="metric-val">'+fg.avg_7d+'</span></div>';
  h+='<div class="metric"><span class="metric-name">30D Avg</span><span class="metric-val">'+fg.avg_30d+'</span></div></div>';
  
  // Global Quick Stats
  const gl=D.global_market||{};
  h+='<div class="card"><div class="card-title">üåç Market Cap</div>';
  h+='<div class="stat-big">'+(gl.total_mcap_fmt||'-')+'</div>';
  h+='<div class="stat-sm">24h Change: <span class="'+cl(gl.mcap_change_24h)+'">'+pct(gl.mcap_change_24h)+'</span></div>';
  h+='<div class="metric" style="margin-top:8px"><span class="metric-name">BTC Dominance</span><span class="metric-val">'+(gl.btc_dominance||'-')+'%</span></div>';
  h+='<div class="metric"><span class="metric-name">ETH Dominance</span><span class="metric-val">'+(gl.eth_dominance||'-')+'%</span></div>';
  h+='<div class="metric"><span class="metric-name">24h Volume</span><span class="metric-val">'+(gl.total_volume_fmt||'-')+'</span></div></div>';
  h+='</div>';
  
  // Risk Signals
  if(R.signals&&R.signals.length){
    h+='<div style="margin:12px 0">';
    R.signals.forEach(function(s){
      const cls=s.startsWith('üî¥')?'alert-red':s.startsWith('üü¢')?'alert-green':'alert-yellow';
      h+='<div class="alert-box '+cls+'">'+s+'</div>';
    });
    h+='</div>';
  }
  
  // Funding Sentiment + Stablecoin Flow
  const fn=D.funding||{};
  const st=D.stablecoins||{};
  h+='<div class="grid g3" style="margin-top:12px">';
  
  h+='<div class="card"><div class="card-title">üìä Leverage Sentiment</div>';
  h+='<div style="font-size:16px;font-weight:700;margin-bottom:8px">'+(fn.leverage_sentiment||'-')+'</div>';
  h+='<div class="metric"><span class="metric-name">Avg Funding</span><span class="metric-val mono">'+(fn.avg_funding||0).toFixed(4)+'%</span></div>';
  h+='<div class="metric"><span class="metric-name">Long / Short</span><span class="metric-val">'+(fn.positive_count||0)+' / '+(fn.negative_count||0)+'</span></div></div>';
  
  h+='<div class="card"><div class="card-title">üí∞ Stablecoin Flow</div>';
  h+='<div style="font-size:16px;font-weight:700;margin-bottom:8px">'+sig(st.net_signal||'NEUTRAL')+'</div>';
  h+='<div class="metric"><span class="metric-name">Total Supply</span><span class="metric-val">'+(st.total_mcap_fmt||'-')+'</span></div>';
  h+='<div class="metric"><span class="metric-name">Minting / Burning</span><span class="metric-val"><span class="up">'+(st.minting_count||0)+'</span> / <span class="dn">'+(st.burning_count||0)+'</span></span></div></div>';
  
  // DeFi TVL
  const tvl=D.tvl||{};
  h+='<div class="card"><div class="card-title">üèóÔ∏è Total DeFi TVL</div>';
  h+='<div class="stat-big">'+(tvl.total_tvl_fmt||'-')+'</div>';
  if(tvl.chains&&tvl.chains.length){
    h+='<div style="margin-top:8px">';
    tvl.chains.slice(0,5).forEach(function(c){
      h+='<div class="metric"><span class="metric-name">'+c.name+'</span><span class="metric-val">'+(c.tvl_fmt||'-')+' <span style="color:var(--t3);font-size:10px">'+c.share+'%</span></span></div>';
    });
    h+='</div>';
  }
  h+='</div></div>';
  
  // Top Coins Table
  const coins=D.top_coins||{};
  if(coins.coins&&coins.coins.length){
    h+='<div class="card" style="margin-top:12px"><div class="card-title">üîù Top Coins by Market Cap</div>';
    h+='<table><thead><tr><th>#</th><th>Coin</th><th style="text-align:right">Price</th><th style="text-align:right">1h</th><th style="text-align:right">24h</th><th style="text-align:right">7d</th><th style="text-align:right">30d</th><th style="text-align:right">MCap</th><th style="text-align:right">ATH Œî</th></tr></thead><tbody>';
    coins.coins.forEach(function(c){
      h+='<tr><td class="mono">'+c.rank+'</td><td><strong>'+c.symbol+'</strong> <span style="color:var(--t3);font-size:10px">'+c.name+'</span></td>';
      h+='<td style="text-align:right" class="mono">'+c.price_fmt+'</td>';
      h+='<td style="text-align:right" class="mono '+cl(c.change_1h)+'">'+pct(c.change_1h)+'</td>';
      h+='<td style="text-align:right" class="mono '+cl(c.change_24h)+'">'+pct(c.change_24h)+'</td>';
      h+='<td style="text-align:right" class="mono '+cl(c.change_7d)+'">'+pct(c.change_7d)+'</td>';
      h+='<td style="text-align:right" class="mono '+cl(c.change_30d)+'">'+pct(c.change_30d)+'</td>';
      h+='<td style="text-align:right" class="mono">'+c.mcap_fmt+'</td>';
      h+='<td style="text-align:right" class="mono '+cl(c.ath_change)+'">'+pct(c.ath_change)+'</td></tr>';
    });
    h+='</tbody></table></div>';
  }
  h+='</div>';
  
  // ‚ïê‚ïê STABLECOINS ‚ïê‚ïê
  h+='<div class="pane" id="pane-stablecoins">';
  h+='<div class="card"><div class="card-title">üí∞ Stablecoin Supply Monitor ‚Äî Mint/Burn Signals</div>';
  h+='<div class="grid g3" style="margin-bottom:12px">';
  h+='<div class="card" style="text-align:center"><div class="stat-sm">Total Supply</div><div class="stat-big">'+(st.total_mcap_fmt||'-')+'</div></div>';
  h+='<div class="card" style="text-align:center"><div class="stat-sm">Net Signal</div><div class="stat-big">'+sig(st.net_signal||'NEUTRAL')+'</div></div>';
  h+='<div class="card" style="text-align:center"><div class="stat-sm">Minting / Burning</div><div class="stat-big"><span class="up">'+(st.minting_count||0)+'</span> / <span class="dn">'+(st.burning_count||0)+'</span></div></div>';
  h+='</div>';
  if(st.stablecoins&&st.stablecoins.length){
    h+='<table><thead><tr><th>Stablecoin</th><th>Symbol</th><th style="text-align:right">Market Cap</th><th style="text-align:right">7D Change</th><th>Signal</th><th>Mechanism</th></tr></thead><tbody>';
    st.stablecoins.forEach(function(s){
      h+='<tr><td><strong>'+s.name+'</strong></td><td class="mono">'+s.symbol+'</td>';
      h+='<td style="text-align:right" class="mono">'+s.mcap_fmt+'</td>';
      h+='<td style="text-align:right" class="mono '+cl(s.change_7d)+'">'+pct(s.change_7d)+'</td>';
      h+='<td>'+sig(s.signal)+'</td>';
      h+='<td style="color:var(--t3);font-size:10px">'+s.mechanism+'</td></tr>';
    });
    h+='</tbody></table>';
  }
  h+='</div></div>';
  
  // ‚ïê‚ïê TVL ‚ïê‚ïê
  h+='<div class="pane" id="pane-tvl">';
  h+='<div class="grid g2">';
  h+='<div class="card"><div class="card-title">üèóÔ∏è TVL by Chain</div>';
  if(tvl.chains&&tvl.chains.length){
    h+='<table><thead><tr><th>Chain</th><th style="text-align:right">TVL</th><th style="text-align:right">Share</th></tr></thead><tbody>';
    tvl.chains.forEach(function(c){
      h+='<tr><td><strong>'+c.name+'</strong></td><td style="text-align:right" class="mono">'+c.tvl_fmt+'</td><td style="text-align:right" class="mono">'+c.share+'%</td></tr>';
    });
    h+='</tbody></table>';
  }
  h+='</div>';
  h+='<div class="card"><div class="card-title">üèÜ Top Protocols</div>';
  if(tvl.top_protocols&&tvl.top_protocols.length){
    h+='<table><thead><tr><th>Protocol</th><th>Chain</th><th style="text-align:right">TVL</th><th style="text-align:right">1D</th><th style="text-align:right">7D</th></tr></thead><tbody>';
    tvl.top_protocols.forEach(function(p){
      h+='<tr><td><strong>'+p.name+'</strong></td><td style="font-size:10px;color:var(--t3)">'+p.chain+'</td>';
      h+='<td style="text-align:right" class="mono">'+p.tvl_fmt+'</td>';
      h+='<td style="text-align:right" class="mono '+cl(p.change_1d)+'">'+pct(p.change_1d)+'</td>';
      h+='<td style="text-align:right" class="mono '+cl(p.change_7d)+'">'+pct(p.change_7d)+'</td></tr>';
    });
    h+='</tbody></table>';
  }
  h+='</div></div></div>';
  
  // ‚ïê‚ïê DERIVATIVES ‚ïê‚ïê
  h+='<div class="pane" id="pane-derivatives">';
  h+='<div class="grid g2">';
  h+='<div class="card"><div class="card-title">üìà Highest Funding Rates (Most Longed)</div>';
  if(fn.most_longed&&fn.most_longed.length){
    h+='<table><thead><tr><th>Symbol</th><th style="text-align:right">Funding</th><th style="text-align:right">Annualized</th><th style="text-align:right">Basis (bps)</th></tr></thead><tbody>';
    fn.most_longed.forEach(function(p){
      h+='<tr><td class="mono"><strong>'+p.symbol+'</strong></td>';
      h+='<td style="text-align:right" class="mono up">'+p.funding_rate.toFixed(4)+'%</td>';
      h+='<td style="text-align:right" class="mono up">'+p.annualized.toFixed(1)+'%</td>';
      h+='<td style="text-align:right" class="mono">'+p.basis_bps+'</td></tr>';
    });
    h+='</tbody></table>';
  }
  h+='</div>';
  h+='<div class="card"><div class="card-title">üìâ Lowest Funding Rates (Most Shorted)</div>';
  if(fn.most_shorted&&fn.most_shorted.length){
    h+='<table><thead><tr><th>Symbol</th><th style="text-align:right">Funding</th><th style="text-align:right">Annualized</th><th style="text-align:right">Basis (bps)</th></tr></thead><tbody>';
    fn.most_shorted.forEach(function(p){
      h+='<tr><td class="mono"><strong>'+p.symbol+'</strong></td>';
      h+='<td style="text-align:right" class="mono dn">'+p.funding_rate.toFixed(4)+'%</td>';
      h+='<td style="text-align:right" class="mono dn">'+p.annualized.toFixed(1)+'%</td>';
      h+='<td style="text-align:right" class="mono">'+p.basis_bps+'</td></tr>';
    });
    h+='</tbody></table>';
  }
  h+='</div></div>';
  
  // Full funding table
  h+='<div class="card" style="margin-top:12px"><div class="card-title">üìä All Funding Rates (Top 20)</div>';
  if(fn.top_funding&&fn.top_funding.length){
    h+='<table><thead><tr><th>Symbol</th><th style="text-align:right">Funding 8H</th><th style="text-align:right">Annualized</th><th style="text-align:right">Mark Price</th><th style="text-align:right">Basis (bps)</th></tr></thead><tbody>';
    fn.top_funding.forEach(function(p){
      h+='<tr><td class="mono"><strong>'+p.symbol+'</strong></td>';
      h+='<td style="text-align:right" class="mono '+cl(p.funding_rate)+'">'+p.funding_rate.toFixed(4)+'%</td>';
      h+='<td style="text-align:right" class="mono '+cl(p.annualized)+'">'+p.annualized.toFixed(1)+'%</td>';
      h+='<td style="text-align:right" class="mono">$'+p.mark_price.toLocaleString()+'</td>';
      h+='<td style="text-align:right" class="mono">'+p.basis_bps+'</td></tr>';
    });
    h+='</tbody></table>';
  }
  h+='</div>';
  
  // Open Interest
  const oi=D.open_interest||{};
  if(oi.open_interest&&oi.open_interest.length){
    h+='<div class="card" style="margin-top:12px"><div class="card-title">üìä Open Interest</div>';
    h+='<table><thead><tr><th>Symbol</th><th style="text-align:right">Open Interest</th></tr></thead><tbody>';
    oi.open_interest.forEach(function(o){
      h+='<tr><td class="mono"><strong>'+o.symbol+'</strong></td><td style="text-align:right" class="mono">'+o.open_interest.toLocaleString()+'</td></tr>';
    });
    h+='</tbody></table></div>';
  }
  h+='</div>';
  
  // ‚ïê‚ïê SENTIMENT ‚ïê‚ïê
  h+='<div class="pane" id="pane-sentiment">';
  h+='<div class="grid g2">';
  h+='<div class="card"><div class="card-title">üò± Fear & Greed Index</div>';
  h+='<div class="risk-gauge">';
  h+='<div class="risk-score" style="color:'+fgClr+'">'+fgv+'</div>';
  h+='<div class="risk-label" style="color:'+fgClr+'">'+fg.label+'</div>';
  h+='<div class="fg-gauge"><div class="fg-needle" style="left:'+fgv+'%"></div></div>';
  h+='<div style="display:flex;justify-content:space-between;font-size:10px;color:var(--t3)"><span>Extreme Fear</span><span>Fear</span><span>Neutral</span><span>Greed</span><span>Extreme Greed</span></div>';
  h+='</div>';
  h+='<div class="metric"><span class="metric-name">7-Day Average</span><span class="metric-val">'+fg.avg_7d+'</span></div>';
  h+='<div class="metric"><span class="metric-name">30-Day Average</span><span class="metric-val">'+fg.avg_30d+'</span></div></div>';
  
  // F&G History
  h+='<div class="card"><div class="card-title">üìÖ Fear & Greed History (30D)</div>';
  if(fg.history&&fg.history.length){
    h+='<table><thead><tr><th>Date</th><th style="text-align:right">Value</th><th>Label</th></tr></thead><tbody>';
    fg.history.slice(0,14).forEach(function(e){
      const ec=e.value<25?'dn':e.value<45?'nt':e.value<55?'':e.value<75?'up':'up';
      h+='<tr><td class="mono">'+e.date+'</td><td style="text-align:right" class="mono '+ec+'">'+e.value+'</td><td>'+e.label+'</td></tr>';
    });
    h+='</tbody></table>';
  }
  h+='</div></div>';
  
  // CMC Movers
  const cmc=D.cmc_movers||{};
  if(cmc.top_gainers||cmc.top_losers){
    h+='<div class="grid g2" style="margin-top:12px">';
    h+='<div class="card"><div class="card-title">üöÄ Top Gainers (24h)</div>';
    if(cmc.top_gainers){
      h+='<table><thead><tr><th>Coin</th><th style="text-align:right">Price</th><th style="text-align:right">24h</th></tr></thead><tbody>';
      cmc.top_gainers.forEach(function(c){
        h+='<tr><td><strong>'+c.symbol+'</strong> <span style="color:var(--t3);font-size:10px">'+c.name+'</span></td>';
        h+='<td style="text-align:right" class="mono">$'+c.price+'</td>';
        h+='<td style="text-align:right" class="mono up">'+pct(c.change_24h)+'</td></tr>';
      });
      h+='</tbody></table>';
    }
    h+='</div>';
    h+='<div class="card"><div class="card-title">üìâ Top Losers (24h)</div>';
    if(cmc.top_losers){
      h+='<table><thead><tr><th>Coin</th><th style="text-align:right">Price</th><th style="text-align:right">24h</th></tr></thead><tbody>';
      cmc.top_losers.forEach(function(c){
        h+='<tr><td><strong>'+c.symbol+'</strong> <span style="color:var(--t3);font-size:10px">'+c.name+'</span></td>';
        h+='<td style="text-align:right" class="mono">$'+c.price+'</td>';
        h+='<td style="text-align:right" class="mono dn">'+pct(c.change_24h)+'</td></tr>';
      });
      h+='</tbody></table>';
    }
    h+='</div></div>';
  }
  h+='</div>';
  
  // ‚ïê‚ïê GLOBAL MARKET ‚ïê‚ïê
  h+='<div class="pane" id="pane-global">';
  h+='<div class="card"><div class="card-title">üåç Global Crypto Market Overview</div>';
  h+='<div class="grid g4">';
  h+='<div class="card" style="text-align:center"><div class="stat-sm">Total Market Cap</div><div class="stat-big">'+(gl.total_mcap_fmt||'-')+'</div></div>';
  h+='<div class="card" style="text-align:center"><div class="stat-sm">24h Volume</div><div class="stat-big">'+(gl.total_volume_fmt||'-')+'</div></div>';
  h+='<div class="card" style="text-align:center"><div class="stat-sm">BTC Dominance</div><div class="stat-big">'+(gl.btc_dominance||'-')+'%</div></div>';
  h+='<div class="card" style="text-align:center"><div class="stat-sm">24h MCap Œî</div><div class="stat-big '+cl(gl.mcap_change_24h)+'">'+pct(gl.mcap_change_24h)+'</div></div>';
  h+='</div>';
  h+='<div class="metric" style="margin-top:12px"><span class="metric-name">Active Cryptocurrencies</span><span class="metric-val">'+(gl.active_cryptos||'-').toLocaleString()+'</span></div>';
  h+='<div class="metric"><span class="metric-name">Active Markets</span><span class="metric-val">'+(gl.markets||'-').toLocaleString()+'</span></div>';
  h+='<div class="metric"><span class="metric-name">ETH Dominance</span><span class="metric-val">'+(gl.eth_dominance||'-')+'%</span></div>';
  h+='</div></div>';
  
  // ‚ïê‚ïê BTC ON-CHAIN ‚ïê‚ïê
  h+='<div class="pane" id="pane-onchain">';
  const oc=D.btc_onchain||{};
  h+='<div class="card"><div class="card-title">‚õìÔ∏è Bitcoin On-Chain Metrics</div>';
  if(oc.metrics){
    h+='<table><thead><tr><th>Metric</th><th style="text-align:right">Value</th><th style="text-align:right">7D Change</th></tr></thead><tbody>';
    Object.keys(oc.metrics).forEach(function(k){
      const m=oc.metrics[k];
      h+='<tr><td><strong>'+(m.name||k)+'</strong></td>';
      h+='<td style="text-align:right" class="mono">'+(typeof m.value==='number'?m.value.toLocaleString():m.value)+' '+(m.unit||'')+'</td>';
      if(m.change_7d!=null){h+='<td style="text-align:right" class="mono '+cl(m.change_7d)+'">'+pct(m.change_7d)+'</td>';}
      else{h+='<td></td>';}
      h+='</tr>';
    });
    h+='</tbody></table>';
  }
  h+='</div></div>';
  
  // ‚ïê‚ïê DEX VOLUME ‚ïê‚ïê
  h+='<div class="pane" id="pane-dex">';
  const dx=D.dex||{};
  h+='<div class="card"><div class="card-title">üîÑ DEX Trading Volume (24h)</div>';
  h+='<div style="font-size:24px;font-weight:700;margin-bottom:12px">'+(dx.total_24h_fmt||'-')+'</div>';
  if(dx.top_dexes&&dx.top_dexes.length){
    h+='<table><thead><tr><th>DEX</th><th style="text-align:right">24h Volume</th><th style="text-align:right">1D Change</th></tr></thead><tbody>';
    dx.top_dexes.forEach(function(d){
      h+='<tr><td><strong>'+d.name+'</strong></td>';
      h+='<td style="text-align:right" class="mono">'+d.volume_fmt+'</td>';
      h+='<td style="text-align:right" class="mono '+cl(d.change_1d)+'">'+pct(d.change_1d)+'</td></tr>';
    });
    h+='</tbody></table>';
  }
  h+='</div></div>';
  
  // ‚ïê‚ïê DEFI YIELDS ‚ïê‚ïê
  h+='<div class="pane" id="pane-yields">';
  const yl=D.yields||{};
  h+='<div class="card"><div class="card-title">üíé Top DeFi Yields</div>';
  if(yl.top_yields&&yl.top_yields.length){
    h+='<table><thead><tr><th>Project</th><th>Chain</th><th>Asset</th><th style="text-align:right">APY</th><th style="text-align:right">TVL</th><th>Stablecoin</th></tr></thead><tbody>';
    yl.top_yields.forEach(function(y){
      h+='<tr><td><strong>'+y.project+'</strong></td>';
      h+='<td style="font-size:10px;color:var(--t3)">'+y.chain+'</td>';
      h+='<td class="mono">'+y.symbol+'</td>';
      h+='<td style="text-align:right" class="mono up">'+y.apy.toFixed(2)+'%</td>';
      h+='<td style="text-align:right" class="mono">'+y.tvl_fmt+'</td>';
      h+='<td>'+(y.stablecoin?'‚úÖ':'')+'</td></tr>';
    });
    h+='</tbody></table>';
  }
  h+='</div></div>';
  
  // Footer
  h+='<div style="text-align:center;padding:16px;font-size:10px;color:var(--t3);border-top:1px solid var(--brd);margin-top:20px">';
  h+='Sources: DeFiLlama ¬∑ Binance ¬∑ CoinGecko ¬∑ Blockchain.com ¬∑ Alternative.me ¬∑ CoinMarketCap | ';
  h+='Generated: '+ts+' | Fetch: '+D.fetch_time+'s | ';
  h+='Auto-refresh: 5 min | JustHodl.AI Crypto Intel v'+D.version;
  h+='</div>';
  
  document.getElementById('main').innerHTML=h;
}

function loadData(){
  fetch(DU+'?t='+Date.now(),{cache:'no-store'})
    .then(function(r){if(!r.ok)throw new Error('HTTP '+r.status);return r.json()})
    .then(function(d){D=d;render()})
    .catch(function(e){
      console.error(e);
      document.getElementById('main').innerHTML='<div class="loading" style="color:var(--red)"><div style="font-size:16px;margin-bottom:8px">Failed to load crypto intelligence</div><div style="font-size:12px;color:var(--t3)">'+e.message+'</div><div style="margin-top:12px;font-size:11px;color:var(--t3)">Data URL: '+DU+'</div></div>';
    });
}
loadData();
setInterval(loadData,300000);
</script>
</body>
</html>
